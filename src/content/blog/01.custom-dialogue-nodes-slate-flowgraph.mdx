---
title: "Custom dialogue nodes with Slate using FlowGraph"
description: "I think narrative designers should have some fun with tools, as a treat"
tags: [unreal, slate, flowgraph]
pubDate: "Jul 15 2022"
heroImage: "/cdns/heroimg.jpeg"
---

import ImageWithAltText from "./_components/ImageWithAltText.svelte";

export const components = { img: ImageWithAltText };

import UENode from "./_01.custom-dialogue-nodes-slate-flowgraph/UENode.svelte";

While working on my dialogue editor for my platformer game recently, I thought, why not make these

<UENode title="boring ass nodes" />
look more interesting?

## Where I've started

Below is a screenshot of what essentially is a Before and After.  
![Pictured from bottom to top: a node that's a prototype implementation of the Dialogue Node made completely in Blueprint, and a node that's been reimplemented with C++, with custom styling that looks almost like how the Dialogue box would look like in-game.](/cdns/before-and-after.png)

I use the [Flow Graph](https://github.com/mothcocoon/flowgraph) plugin made by MothCocoon. It's a design-agnostic node editor, that can be used for practically anything.

I personally use it for Event scripting, but recently I've decided to create a Dialogue variant of it. I still don't have a working implementation of the Dialogue system in my game, but just having the editor made to work the way I wanted it to is already helping me visualize certain dialogue segments.

Another plugin I also use is [Editor Scripting Tools](https://github.com/HoussineMehnik/UE4-EditorScriptingToolsPlugin) by Elhoussine Mehnik. I use it mainly for the Detail Customization Utility it provides, that lets me customize the Details panel for any class, using Blueprints instead of C++. It also lets me put in UMG widgets directly in there!

![Pictured: the Details panel, with a custom UMG widget that shows how the Dialogue box would look like in-game.](/cdns/detailsumg.png)

This post is mainly going to be focused on the parts that I did in C++. And I also want to mention that it involves Slate... _\*shudders\*_ just kidding, it's actually somewhat easier for me to grasp it now that I've done this thing.

## How much code???

For this, I only needed to create 3 classes, 2 of which live in the game's Editor module. I also modified FlowGraph in certain spots to let me use my custom Slate widget for a Blueprint class and to use the already existing classes there as a base for my own. Let's begin with that!

### FlowGraph edits

First things first, I've exposed the `SFlowGraphNode` and `FFlowEditorStyle` classes, by adding the `FLOWEDITOR_API` macro to the class definitions, which automatically adds the dllexport and dllimport attributes, which are required to access the classes from outside the FlowEditor module, which lets me inherit from `SFlowGraphNode`, and use the styling from the plugin.

Then, I modified the `GetAssignedGraphNodeClass` function in UFlowGraphSchema, to account for child classes. I only did this so that I could have Blueprint classes inherited from my C++ classes to be able to have the same visual representation as their parent.
